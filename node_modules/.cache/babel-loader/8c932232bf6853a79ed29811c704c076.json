{"ast":null,"code":"var _jsxFileName = \"/Users/leezer/Desktop/codeStates/REACT_TYPESCRIPT_STUDY/react-study/src/components/word-relay/currentGame.tsx\",\n    _s = $RefreshSig$();\n\nimport { 한글_정규표현식 } from '../../common/regex';\nimport { clearInputValue } from '../../utils/utils';\nimport { isValidInputWord } from '../../utils/validator';\nimport { fetch우리말api } from '../../common/api';\nimport { CLASSNAME, COLOR, DEFAULT, ERROR_MESSAGE } from '../../common/constants/constants';\nimport { useRef, useState } from 'react';\nimport { Button, Input, Form } from '..';\nimport React from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst CurrentGame = () => {\n  _s();\n\n  const [state, setState] = useState({\n    prevWord: undefined,\n    currentWord: DEFAULT.GIVEN_WORD,\n    definition: undefined,\n    loading: false\n  });\n  const wordInput = useRef();\n  const errorMessage = useRef(null);\n  const wordRelayForm = useRef(null);\n\n  const handleErrorMessage = (word, currentWord) => {\n    if ((word.length > 3 || word.length < 3) && 한글_정규표현식.test(word)) {\n      return ERROR_MESSAGE.NOT_THREE_WORD;\n    } else if (!한글_정규표현식.test(word)) {\n      return ERROR_MESSAGE.NOT_KOREAN;\n    } else if (currentWord.at(-1) !== word.at(0)) {\n      return ERROR_MESSAGE.NOT_CORRESPONDING_LETTER;\n    } else {\n      return undefined;\n    }\n  }; // const updateErrorMessage = (message) => {\n  //   errorMessage.current.textContent = message;\n  // };\n\n\n  const handleSubmitButton = async word => {\n    let {\n      currentWord\n    } = state;\n    setState({\n      loading: true\n    });\n\n    if (await fetch우리말api(word)) {\n      setTimeout(async () => {\n        setState({ ...state,\n          prevWord: currentWord,\n          currentWord: word,\n          definition: await fetch우리말api(word),\n          loading: false\n        });\n      });\n    } else {\n      setTimeout(async () => {\n        setState({ ...state,\n          prevWord: currentWord,\n          definition: undefined,\n          loading: false\n        });\n      });\n    }\n  };\n\n  const onClickSubmitButton = currentWord => {\n    const errorMessageHandler = handleErrorMessage(wordInput.current.value, currentWord); // updateErrorMessage(errorMessageHandler);\n\n    if (isValidInputWord(errorMessageHandler)) {\n      handleSubmitButton(wordInput.current.value);\n    }\n\n    clearInputValue(wordInput);\n  };\n\n  const handleKeyPressEvent = e => {\n    return e.key === 'Enter' ? handleSubmitWord(e) : undefined;\n  };\n\n  const handleSubmitWord = e => {\n    e.preventDefault();\n    const {\n      currentWord\n    } = state;\n    onClickSubmitButton(currentWord);\n  };\n\n  const {\n    currentWord,\n    definition,\n    loading\n  } = state;\n  return /*#__PURE__*/_jsxDEV(Form, {\n    ref: wordRelayForm,\n    onSubmit: handleSubmitWord,\n    children: [/*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"current-word\",\n      children: currentWord\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Input, {\n      ref: wordInput,\n      type: \"text\",\n      onKeyPressEvent: handleKeyPressEvent\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Button, {\n      type: 'submit',\n      title: '입력'\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      className: loading ? undefined : CLASSNAME.HIDE,\n      children: \"\\uC0AC\\uC804 \\uAC80\\uC0C9\\uC911...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      className: loading ? CLASSNAME.HIDE : undefined,\n      children: definition ? definition : ERROR_MESSAGE.EMPTY_INPUT\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      style: {\n        color: COLOR.RED\n      },\n      ref: errorMessage\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 98,\n    columnNumber: 5\n  }, this);\n};\n\n_s(CurrentGame, \"iNbG30fKsY2mNPeO1fS7YbzwKnQ=\");\n\n_c = CurrentGame;\nexport default CurrentGame;\n\nvar _c;\n\n$RefreshReg$(_c, \"CurrentGame\");","map":{"version":3,"names":["한글_정규표현식","clearInputValue","isValidInputWord","fetch우리말api","CLASSNAME","COLOR","DEFAULT","ERROR_MESSAGE","useRef","useState","Button","Input","Form","React","CurrentGame","state","setState","prevWord","undefined","currentWord","GIVEN_WORD","definition","loading","wordInput","errorMessage","wordRelayForm","handleErrorMessage","word","length","test","NOT_THREE_WORD","NOT_KOREAN","at","NOT_CORRESPONDING_LETTER","handleSubmitButton","setTimeout","onClickSubmitButton","errorMessageHandler","current","value","handleKeyPressEvent","e","key","handleSubmitWord","preventDefault","HIDE","EMPTY_INPUT","color","RED"],"sources":["/Users/leezer/Desktop/codeStates/REACT_TYPESCRIPT_STUDY/react-study/src/components/word-relay/currentGame.tsx"],"sourcesContent":["import { 한글_정규표현식 } from '../../common/regex';\nimport { clearInputValue } from '../../utils/utils';\nimport { isValidInputWord } from '../../utils/validator';\nimport { fetch우리말api } from '../../common/api';\nimport { CLASSNAME, COLOR, DEFAULT, ERROR_MESSAGE } from '../../common/constants/constants';\nimport { useRef, useState } from 'react';\nimport { Button, Input, Form } from '..';\nimport React from 'react';\n\ntype setState = any;\n\ntype state = {\n  prevWord: undefined;\n  currentWord: string;\n  definition: undefined;\n  loading: boolean;\n};\n\nconst CurrentGame = () => {\n  const [state, setState] = useState<setState>({ prevWord: undefined, currentWord: DEFAULT.GIVEN_WORD, definition: undefined, loading: false });\n\n  const wordInput = useRef<HTMLInputElement>();\n  const errorMessage = useRef<HTMLParagraphElement>(null);\n  const wordRelayForm = useRef<HTMLFormElement>(null);\n\n  const handleErrorMessage = (word: string, currentWord: string) => {\n    if ((word.length > 3 || word.length < 3) && 한글_정규표현식.test(word)) {\n      return ERROR_MESSAGE.NOT_THREE_WORD;\n    } else if (!한글_정규표현식.test(word)) {\n      return ERROR_MESSAGE.NOT_KOREAN;\n    } else if (currentWord.at(-1) !== word.at(0)) {\n      return ERROR_MESSAGE.NOT_CORRESPONDING_LETTER;\n    } else {\n      return undefined;\n    }\n  };\n\n  // const updateErrorMessage = (message) => {\n  //   errorMessage.current.textContent = message;\n  // };\n\n  const handleSubmitButton = async (word: any) => {\n    let { currentWord } = state;\n\n    setState({\n      loading: true,\n    });\n\n    if (await fetch우리말api(word)) {\n      setTimeout(async () => {\n        setState({\n          ...state,\n          prevWord: currentWord,\n          currentWord: word,\n          definition: await fetch우리말api(word),\n          loading: false,\n        });\n      });\n    } else {\n      setTimeout(async () => {\n        setState({\n          ...state,\n          prevWord: currentWord,\n          definition: undefined,\n          loading: false,\n        });\n      });\n    }\n  };\n\n  const onClickSubmitButton = (currentWord: string) => {\n    const errorMessageHandler: string | undefined = handleErrorMessage(wordInput.current.value, currentWord);\n\n    // updateErrorMessage(errorMessageHandler);\n\n    if (isValidInputWord(errorMessageHandler)) {\n      handleSubmitButton(wordInput.current.value);\n    }\n\n    clearInputValue(wordInput);\n  };\n\n  const handleKeyPressEvent = (e: { key: string }) => {\n    return e.key === 'Enter' ? handleSubmitWord(e) : undefined;\n  };\n\n  const handleSubmitWord = (e: { preventDefault: () => void }) => {\n    e.preventDefault();\n\n    const { currentWord } = state;\n\n    onClickSubmitButton(currentWord);\n  };\n\n  const { currentWord, definition, loading } = state;\n\n  return (\n    <Form ref={wordRelayForm} onSubmit={handleSubmitWord}>\n      <p className='current-word'>{currentWord}</p>\n      <Input ref={wordInput} type='text' onKeyPressEvent={handleKeyPressEvent} />\n      <Button type={'submit'} title={'입력'} />\n      <p className={loading ? undefined : CLASSNAME.HIDE}>사전 검색중...</p>\n      <p className={loading ? CLASSNAME.HIDE : undefined}>{definition ? definition : ERROR_MESSAGE.EMPTY_INPUT}</p>\n      <p style={{ color: COLOR.RED }} ref={errorMessage}></p>\n    </Form>\n  );\n};\n\nexport default CurrentGame;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}