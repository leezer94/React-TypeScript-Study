{"ast":null,"code":"var _jsxFileName = \"/Users/leezer/Desktop/codeStates/REACT_TYPESCRIPT_STUDY/react-study/src/components/word-relay/currentGame.js\",\n    _s = $RefreshSig$();\n\nimport { 한글_정규표현식 } from '../../common/regex.js';\nimport { clearInputValue } from '../../utils/utils.js';\nimport { isValidInputWord } from '../../utils/validator.js';\nimport { fetch우리말api } from '../../common/api.js';\nimport { CLASSNAME, COLOR, DEFAULT, ERROR_MESSAGE } from '../../common/constants/constants.js';\nimport { useRef, useState } from 'react';\nimport { Button, Input, Form } from '..';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst CurrentGame = () => {\n  _s();\n\n  const [state, setState] = useState({\n    prevWord: undefined,\n    currentWord: DEFAULT.GIVEN_WORD,\n    definition: undefined,\n    loading: false\n  });\n  const wordInput = useRef();\n  const errorMessage = useRef();\n  const wordRelayForm = useRef();\n\n  const handleErrorMessage = (word, currentWord) => {\n    if ((word.length > 3 || word.length < 3) && 한글_정규표현식.test(word)) {\n      return ERROR_MESSAGE.NOT_THREE_WORD;\n    } else if (!한글_정규표현식.test(word)) {\n      return ERROR_MESSAGE.NOT_KOREAN;\n    } else if (currentWord.at(-1) !== word.at(0)) {\n      return ERROR_MESSAGE.NOT_CORRESPONDING_LETTER;\n    } else {\n      return undefined;\n    }\n  };\n\n  const updateErrorMessage = message => {\n    errorMessage.current.textContent = message;\n  };\n\n  const handleSubmitButton = async word => {\n    let {\n      currentWord\n    } = state;\n    setState({\n      loading: true\n    });\n\n    if (await fetch우리말api(word)) {\n      setTimeout(async () => {\n        setState({ ...state,\n          prevWord: currentWord,\n          currentWord: word,\n          definition: await fetch우리말api(word),\n          loading: false\n        });\n      });\n    } else {\n      setTimeout(async () => {\n        setState({ ...state,\n          prevWord: currentWord,\n          definition: undefined,\n          loading: false\n        });\n      });\n    }\n  };\n\n  const onClickSubmitButton = currentWord => {\n    const errorMessageHandler = handleErrorMessage(wordInput.current.value, currentWord);\n    updateErrorMessage(errorMessageHandler);\n\n    if (isValidInputWord(errorMessageHandler)) {\n      handleSubmitButton(wordInput.current.value);\n    }\n\n    clearInputValue(wordInput);\n  };\n\n  const handleKeyPressEvent = e => {\n    return e.key === 'Enter' ? handleSubmitWord(e) : undefined;\n  };\n\n  const handleSubmitWord = e => {\n    e.preventDefault();\n    const {\n      currentWord\n    } = state;\n    onClickSubmitButton(currentWord);\n  };\n\n  const {\n    currentWord,\n    definition,\n    loading\n  } = state;\n  return /*#__PURE__*/_jsxDEV(Form, {\n    ref: wordRelayForm,\n    onSubmit: handleSubmitWord,\n    children: [/*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"current-word\",\n      children: currentWord\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Input, {\n      ref: wordInput,\n      type: \"text\",\n      onKeyPressEvent: handleKeyPressEvent\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Button, {\n      type: 'submit',\n      title: '입력'\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      className: loading ? undefined : CLASSNAME.HIDE,\n      children: \"\\uC0AC\\uC804 \\uAC80\\uC0C9\\uC911...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      className: loading ? CLASSNAME.HIDE : undefined,\n      children: definition ? definition : ERROR_MESSAGE.EMPTY_INPUT\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      style: {\n        color: COLOR.RED\n      },\n      ref: errorMessage\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 87,\n    columnNumber: 5\n  }, this);\n};\n\n_s(CurrentGame, \"iNbG30fKsY2mNPeO1fS7YbzwKnQ=\");\n\n_c = CurrentGame;\nexport default CurrentGame;\n\nvar _c;\n\n$RefreshReg$(_c, \"CurrentGame\");","map":{"version":3,"names":["한글_정규표현식","clearInputValue","isValidInputWord","fetch우리말api","CLASSNAME","COLOR","DEFAULT","ERROR_MESSAGE","useRef","useState","Button","Input","Form","CurrentGame","state","setState","prevWord","undefined","currentWord","GIVEN_WORD","definition","loading","wordInput","errorMessage","wordRelayForm","handleErrorMessage","word","length","test","NOT_THREE_WORD","NOT_KOREAN","at","NOT_CORRESPONDING_LETTER","updateErrorMessage","message","current","textContent","handleSubmitButton","setTimeout","onClickSubmitButton","errorMessageHandler","value","handleKeyPressEvent","e","key","handleSubmitWord","preventDefault","HIDE","EMPTY_INPUT","color","RED"],"sources":["/Users/leezer/Desktop/codeStates/REACT_TYPESCRIPT_STUDY/react-study/src/components/word-relay/currentGame.js"],"sourcesContent":["import { 한글_정규표현식 } from '../../common/regex.js';\nimport { clearInputValue } from '../../utils/utils.js';\nimport { isValidInputWord } from '../../utils/validator.js';\nimport { fetch우리말api } from '../../common/api.js';\nimport { CLASSNAME, COLOR, DEFAULT, ERROR_MESSAGE } from '../../common/constants/constants.js';\nimport { useRef, useState } from 'react';\nimport { Button, Input, Form } from '..';\n\nconst CurrentGame = () => {\n  const [state, setState] = useState({ prevWord: undefined, currentWord: DEFAULT.GIVEN_WORD, definition: undefined, loading: false });\n\n  const wordInput = useRef();\n  const errorMessage = useRef();\n  const wordRelayForm = useRef();\n\n  const handleErrorMessage = (word, currentWord) => {\n    if ((word.length > 3 || word.length < 3) && 한글_정규표현식.test(word)) {\n      return ERROR_MESSAGE.NOT_THREE_WORD;\n    } else if (!한글_정규표현식.test(word)) {\n      return ERROR_MESSAGE.NOT_KOREAN;\n    } else if (currentWord.at(-1) !== word.at(0)) {\n      return ERROR_MESSAGE.NOT_CORRESPONDING_LETTER;\n    } else {\n      return undefined;\n    }\n  };\n\n  const updateErrorMessage = (message) => {\n    errorMessage.current.textContent = message;\n  };\n\n  const handleSubmitButton = async (word) => {\n    let { currentWord } = state;\n\n    setState({\n      loading: true,\n    });\n\n    if (await fetch우리말api(word)) {\n      setTimeout(async () => {\n        setState({\n          ...state,\n          prevWord: currentWord,\n          currentWord: word,\n          definition: await fetch우리말api(word),\n          loading: false,\n        });\n      });\n    } else {\n      setTimeout(async () => {\n        setState({\n          ...state,\n          prevWord: currentWord,\n          definition: undefined,\n          loading: false,\n        });\n      });\n    }\n  };\n  const onClickSubmitButton = (currentWord) => {\n    const errorMessageHandler = handleErrorMessage(wordInput.current.value, currentWord);\n\n    updateErrorMessage(errorMessageHandler);\n\n    if (isValidInputWord(errorMessageHandler)) {\n      handleSubmitButton(wordInput.current.value);\n    }\n\n    clearInputValue(wordInput);\n  };\n\n  const handleKeyPressEvent = (e) => {\n    return e.key === 'Enter' ? handleSubmitWord(e) : undefined;\n  };\n\n  const handleSubmitWord = (e) => {\n    e.preventDefault();\n\n    const { currentWord } = state;\n\n    onClickSubmitButton(currentWord);\n  };\n\n  const { currentWord, definition, loading } = state;\n\n  return (\n    <Form ref={wordRelayForm} onSubmit={handleSubmitWord}>\n      <p className='current-word'>{currentWord}</p>\n      <Input ref={wordInput} type='text' onKeyPressEvent={handleKeyPressEvent} />\n      <Button type={'submit'} title={'입력'} />\n      <p className={loading ? undefined : CLASSNAME.HIDE}>사전 검색중...</p>\n      <p className={loading ? CLASSNAME.HIDE : undefined}>{definition ? definition : ERROR_MESSAGE.EMPTY_INPUT}</p>\n      <p style={{ color: COLOR.RED }} ref={errorMessage}></p>\n    </Form>\n  );\n};\n\nexport default CurrentGame;\n"],"mappings":";;;AAAA,SAASA,QAAT,QAAyB,uBAAzB;AACA,SAASC,eAAT,QAAgC,sBAAhC;AACA,SAASC,gBAAT,QAAiC,0BAAjC;AACA,SAASC,WAAT,QAA4B,qBAA5B;AACA,SAASC,SAAT,EAAoBC,KAApB,EAA2BC,OAA3B,EAAoCC,aAApC,QAAyD,qCAAzD;AACA,SAASC,MAAT,EAAiBC,QAAjB,QAAiC,OAAjC;AACA,SAASC,MAAT,EAAiBC,KAAjB,EAAwBC,IAAxB,QAAoC,IAApC;;;AAEA,MAAMC,WAAW,GAAG,MAAM;EAAA;;EACxB,MAAM,CAACC,KAAD,EAAQC,QAAR,IAAoBN,QAAQ,CAAC;IAAEO,QAAQ,EAAEC,SAAZ;IAAuBC,WAAW,EAAEZ,OAAO,CAACa,UAA5C;IAAwDC,UAAU,EAAEH,SAApE;IAA+EI,OAAO,EAAE;EAAxF,CAAD,CAAlC;EAEA,MAAMC,SAAS,GAAGd,MAAM,EAAxB;EACA,MAAMe,YAAY,GAAGf,MAAM,EAA3B;EACA,MAAMgB,aAAa,GAAGhB,MAAM,EAA5B;;EAEA,MAAMiB,kBAAkB,GAAG,CAACC,IAAD,EAAOR,WAAP,KAAuB;IAChD,IAAI,CAACQ,IAAI,CAACC,MAAL,GAAc,CAAd,IAAmBD,IAAI,CAACC,MAAL,GAAc,CAAlC,KAAwC3B,QAAQ,CAAC4B,IAAT,CAAcF,IAAd,CAA5C,EAAiE;MAC/D,OAAOnB,aAAa,CAACsB,cAArB;IACD,CAFD,MAEO,IAAI,CAAC7B,QAAQ,CAAC4B,IAAT,CAAcF,IAAd,CAAL,EAA0B;MAC/B,OAAOnB,aAAa,CAACuB,UAArB;IACD,CAFM,MAEA,IAAIZ,WAAW,CAACa,EAAZ,CAAe,CAAC,CAAhB,MAAuBL,IAAI,CAACK,EAAL,CAAQ,CAAR,CAA3B,EAAuC;MAC5C,OAAOxB,aAAa,CAACyB,wBAArB;IACD,CAFM,MAEA;MACL,OAAOf,SAAP;IACD;EACF,CAVD;;EAYA,MAAMgB,kBAAkB,GAAIC,OAAD,IAAa;IACtCX,YAAY,CAACY,OAAb,CAAqBC,WAArB,GAAmCF,OAAnC;EACD,CAFD;;EAIA,MAAMG,kBAAkB,GAAG,MAAOX,IAAP,IAAgB;IACzC,IAAI;MAAER;IAAF,IAAkBJ,KAAtB;IAEAC,QAAQ,CAAC;MACPM,OAAO,EAAE;IADF,CAAD,CAAR;;IAIA,IAAI,MAAMlB,WAAW,CAACuB,IAAD,CAArB,EAA6B;MAC3BY,UAAU,CAAC,YAAY;QACrBvB,QAAQ,CAAC,EACP,GAAGD,KADI;UAEPE,QAAQ,EAAEE,WAFH;UAGPA,WAAW,EAAEQ,IAHN;UAIPN,UAAU,EAAE,MAAMjB,WAAW,CAACuB,IAAD,CAJtB;UAKPL,OAAO,EAAE;QALF,CAAD,CAAR;MAOD,CARS,CAAV;IASD,CAVD,MAUO;MACLiB,UAAU,CAAC,YAAY;QACrBvB,QAAQ,CAAC,EACP,GAAGD,KADI;UAEPE,QAAQ,EAAEE,WAFH;UAGPE,UAAU,EAAEH,SAHL;UAIPI,OAAO,EAAE;QAJF,CAAD,CAAR;MAMD,CAPS,CAAV;IAQD;EACF,CA3BD;;EA4BA,MAAMkB,mBAAmB,GAAIrB,WAAD,IAAiB;IAC3C,MAAMsB,mBAAmB,GAAGf,kBAAkB,CAACH,SAAS,CAACa,OAAV,CAAkBM,KAAnB,EAA0BvB,WAA1B,CAA9C;IAEAe,kBAAkB,CAACO,mBAAD,CAAlB;;IAEA,IAAItC,gBAAgB,CAACsC,mBAAD,CAApB,EAA2C;MACzCH,kBAAkB,CAACf,SAAS,CAACa,OAAV,CAAkBM,KAAnB,CAAlB;IACD;;IAEDxC,eAAe,CAACqB,SAAD,CAAf;EACD,CAVD;;EAYA,MAAMoB,mBAAmB,GAAIC,CAAD,IAAO;IACjC,OAAOA,CAAC,CAACC,GAAF,KAAU,OAAV,GAAoBC,gBAAgB,CAACF,CAAD,CAApC,GAA0C1B,SAAjD;EACD,CAFD;;EAIA,MAAM4B,gBAAgB,GAAIF,CAAD,IAAO;IAC9BA,CAAC,CAACG,cAAF;IAEA,MAAM;MAAE5B;IAAF,IAAkBJ,KAAxB;IAEAyB,mBAAmB,CAACrB,WAAD,CAAnB;EACD,CAND;;EAQA,MAAM;IAAEA,WAAF;IAAeE,UAAf;IAA2BC;EAA3B,IAAuCP,KAA7C;EAEA,oBACE,QAAC,IAAD;IAAM,GAAG,EAAEU,aAAX;IAA0B,QAAQ,EAAEqB,gBAApC;IAAA,wBACE;MAAG,SAAS,EAAC,cAAb;MAAA,UAA6B3B;IAA7B;MAAA;MAAA;MAAA;IAAA,QADF,eAEE,QAAC,KAAD;MAAO,GAAG,EAAEI,SAAZ;MAAuB,IAAI,EAAC,MAA5B;MAAmC,eAAe,EAAEoB;IAApD;MAAA;MAAA;MAAA;IAAA,QAFF,eAGE,QAAC,MAAD;MAAQ,IAAI,EAAE,QAAd;MAAwB,KAAK,EAAE;IAA/B;MAAA;MAAA;MAAA;IAAA,QAHF,eAIE;MAAG,SAAS,EAAErB,OAAO,GAAGJ,SAAH,GAAeb,SAAS,CAAC2C,IAA9C;MAAA;IAAA;MAAA;MAAA;MAAA;IAAA,QAJF,eAKE;MAAG,SAAS,EAAE1B,OAAO,GAAGjB,SAAS,CAAC2C,IAAb,GAAoB9B,SAAzC;MAAA,UAAqDG,UAAU,GAAGA,UAAH,GAAgBb,aAAa,CAACyC;IAA7F;MAAA;MAAA;MAAA;IAAA,QALF,eAME;MAAG,KAAK,EAAE;QAAEC,KAAK,EAAE5C,KAAK,CAAC6C;MAAf,CAAV;MAAgC,GAAG,EAAE3B;IAArC;MAAA;MAAA;MAAA;IAAA,QANF;EAAA;IAAA;IAAA;IAAA;EAAA,QADF;AAUD,CAvFD;;GAAMV,W;;KAAAA,W;AAyFN,eAAeA,WAAf"},"metadata":{},"sourceType":"module"}