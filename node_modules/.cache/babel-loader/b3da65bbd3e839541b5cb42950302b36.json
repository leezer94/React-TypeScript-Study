{"ast":null,"code":"var _jsxFileName = \"/Users/leezer/Desktop/codeStates/REACT_TYPESCRIPT_STUDY/react-study/src/components/word-relay/currentGame.tsx\",\n    _s = $RefreshSig$();\n\nimport { 한글_정규표현식 } from '../../common/regex';\nimport { clearInputValue } from '../../utils/utils';\nimport { isValidInputWord } from '../../utils/validator';\nimport { fetch우리말api } from '../../common/api';\nimport { CLASSNAME, COLOR, DEFAULT, ERROR_MESSAGE } from '../../common/constants/constants';\nimport { useRef, useState } from 'react';\nimport { Button, Input, Form } from '..';\nimport React from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst CurrentGame = () => {\n  _s();\n\n  const [state, setState] = useState({\n    prevWord: undefined,\n    currentWord: DEFAULT.GIVEN_WORD,\n    definition: undefined,\n    loading: false\n  });\n  const wordInput = useRef(null).current.value;\n  const errorMessage = useRef(null);\n  const wordRelayForm = useRef(null);\n\n  const handleErrorMessage = (word, currentWord) => {\n    if ((word.length > 3 || word.length < 3) && 한글_정규표현식.test(word)) {\n      return ERROR_MESSAGE.NOT_THREE_WORD;\n    } else if (!한글_정규표현식.test(word)) {\n      return ERROR_MESSAGE.NOT_KOREAN;\n    } else if (currentWord.at(-1) !== word.at(0)) {\n      return ERROR_MESSAGE.NOT_CORRESPONDING_LETTER;\n    } else {\n      return undefined;\n    }\n  };\n\n  const updateErrorMessage = message => {\n    errorMessage.current.textContent = message;\n  };\n\n  const handleSubmitButton = async word => {\n    let {\n      currentWord\n    } = state;\n    setState({\n      loading: true\n    });\n\n    if (await fetch우리말api(word)) {\n      setTimeout(async () => {\n        setState({ ...state,\n          prevWord: currentWord,\n          currentWord: word,\n          definition: await fetch우리말api(word),\n          loading: false\n        });\n      });\n    } else {\n      setTimeout(async () => {\n        setState({ ...state,\n          prevWord: currentWord,\n          definition: undefined,\n          loading: false\n        });\n      });\n    }\n  };\n\n  const onClickSubmitButton = currentWord => {\n    const errorMessageHandler = handleErrorMessage(wordInput.current.value, currentWord);\n    updateErrorMessage(errorMessageHandler);\n\n    if (isValidInputWord(errorMessageHandler)) {\n      handleSubmitButton(wordInput.current.value);\n    }\n\n    clearInputValue(wordInput);\n  };\n\n  const handleKeyPressEvent = e => {\n    return e.key === 'Enter' ? handleSubmitWord(e) : undefined;\n  };\n\n  const handleSubmitWord = e => {\n    e.preventDefault();\n    const {\n      currentWord\n    } = state;\n    onClickSubmitButton(currentWord);\n  };\n\n  const {\n    currentWord,\n    definition,\n    loading\n  } = state;\n  return /*#__PURE__*/_jsxDEV(Form, {\n    ref: wordRelayForm,\n    onSubmit: handleSubmitWord,\n    children: [/*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"current-word\",\n      children: currentWord\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Input, {\n      ref: wordInput,\n      type: \"text\",\n      onKeyPressEvent: handleKeyPressEvent\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Button, {\n      type: 'submit',\n      title: '입력'\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      className: loading ? undefined : CLASSNAME.HIDE,\n      children: \"\\uC0AC\\uC804 \\uAC80\\uC0C9\\uC911...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      className: loading ? CLASSNAME.HIDE : undefined,\n      children: definition ? definition : ERROR_MESSAGE.EMPTY_INPUT\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      style: {\n        color: COLOR.RED\n      },\n      ref: errorMessage\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 91,\n    columnNumber: 5\n  }, this);\n};\n\n_s(CurrentGame, \"Aj6ENfu9RU6t8fIOApmuQqPKH5g=\");\n\n_c = CurrentGame;\nexport default CurrentGame;\n\nvar _c;\n\n$RefreshReg$(_c, \"CurrentGame\");","map":{"version":3,"names":["한글_정규표현식","clearInputValue","isValidInputWord","fetch우리말api","CLASSNAME","COLOR","DEFAULT","ERROR_MESSAGE","useRef","useState","Button","Input","Form","React","CurrentGame","state","setState","prevWord","undefined","currentWord","GIVEN_WORD","definition","loading","wordInput","current","value","errorMessage","wordRelayForm","handleErrorMessage","word","length","test","NOT_THREE_WORD","NOT_KOREAN","at","NOT_CORRESPONDING_LETTER","updateErrorMessage","message","textContent","handleSubmitButton","setTimeout","onClickSubmitButton","errorMessageHandler","handleKeyPressEvent","e","key","handleSubmitWord","preventDefault","HIDE","EMPTY_INPUT","color","RED"],"sources":["/Users/leezer/Desktop/codeStates/REACT_TYPESCRIPT_STUDY/react-study/src/components/word-relay/currentGame.tsx"],"sourcesContent":["import { 한글_정규표현식 } from '../../common/regex';\nimport { clearInputValue } from '../../utils/utils';\nimport { isValidInputWord } from '../../utils/validator';\nimport { fetch우리말api } from '../../common/api';\nimport { CLASSNAME, COLOR, DEFAULT, ERROR_MESSAGE } from '../../common/constants/constants';\nimport { useRef, useState } from 'react';\nimport { Button, Input, Form } from '..';\nimport React from 'react';\n\ntype setState = any;\n\nconst CurrentGame = () => {\n  const [state, setState] = useState<setState>({ prevWord: undefined, currentWord: DEFAULT.GIVEN_WORD, definition: undefined, loading: false });\n\n  const wordInput = useRef<HTMLInputElement>(null).current.value;\n  const errorMessage = useRef<HTMLParagraphElement>(null);\n  const wordRelayForm = useRef<HTMLFormElement>(null);\n\n  const handleErrorMessage = (word: string, currentWord: string) => {\n    if ((word.length > 3 || word.length < 3) && 한글_정규표현식.test(word)) {\n      return ERROR_MESSAGE.NOT_THREE_WORD;\n    } else if (!한글_정규표현식.test(word)) {\n      return ERROR_MESSAGE.NOT_KOREAN;\n    } else if (currentWord.at(-1) !== word.at(0)) {\n      return ERROR_MESSAGE.NOT_CORRESPONDING_LETTER;\n    } else {\n      return undefined;\n    }\n  };\n\n  const updateErrorMessage = (message) => {\n    errorMessage.current.textContent = message;\n  };\n\n  const handleSubmitButton = async (word: string) => {\n    let { currentWord } = state;\n\n    setState({\n      loading: true,\n    });\n\n    if (await fetch우리말api(word)) {\n      setTimeout(async () => {\n        setState({\n          ...state,\n          prevWord: currentWord,\n          currentWord: word,\n          definition: await fetch우리말api(word),\n          loading: false,\n        });\n      });\n    } else {\n      setTimeout(async () => {\n        setState({\n          ...state,\n          prevWord: currentWord,\n          definition: undefined,\n          loading: false,\n        });\n      });\n    }\n  };\n\n  const onClickSubmitButton = (currentWord: string) => {\n    const errorMessageHandler: string | undefined = handleErrorMessage(wordInput.current.value, currentWord);\n\n    updateErrorMessage(errorMessageHandler);\n\n    if (isValidInputWord(errorMessageHandler)) {\n      handleSubmitButton(wordInput.current.value);\n    }\n\n    clearInputValue(wordInput);\n  };\n\n  const handleKeyPressEvent = (e: { key: string }) => {\n    return e.key === 'Enter' ? handleSubmitWord(e) : undefined;\n  };\n\n  const handleSubmitWord = (e: { preventDefault: () => void }) => {\n    e.preventDefault();\n\n    const { currentWord } = state;\n\n    onClickSubmitButton(currentWord);\n  };\n\n  const { currentWord, definition, loading } = state;\n\n  return (\n    <Form ref={wordRelayForm} onSubmit={handleSubmitWord}>\n      <p className='current-word'>{currentWord}</p>\n      <Input ref={wordInput} type='text' onKeyPressEvent={handleKeyPressEvent} />\n      <Button type={'submit'} title={'입력'} />\n      <p className={loading ? undefined : CLASSNAME.HIDE}>사전 검색중...</p>\n      <p className={loading ? CLASSNAME.HIDE : undefined}>{definition ? definition : ERROR_MESSAGE.EMPTY_INPUT}</p>\n      <p style={{ color: COLOR.RED }} ref={errorMessage}></p>\n    </Form>\n  );\n};\n\nexport default CurrentGame;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}