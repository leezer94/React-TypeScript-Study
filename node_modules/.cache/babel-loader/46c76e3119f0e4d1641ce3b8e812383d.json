{"ast":null,"code":"import _toConsumableArray from\"/Users/leezer/Desktop/codeStates/REACT_TYPESCRIPT_STUDY/react-study/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _objectSpread from\"/Users/leezer/Desktop/codeStates/REACT_TYPESCRIPT_STUDY/react-study/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/Users/leezer/Desktop/codeStates/REACT_TYPESCRIPT_STUDY/react-study/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useRef,useState}from'react';import{Button,Input,Form,P,DigitButton}from'../../components';import ResultTemplate from'./ResultTemplate';import{COLOR}from'../../common/constants/constants';import{getErrorMessages,createRandomNumbers,clearInputValue,compareTwoArrays,createEmptyArray}from'../../utils';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export var BaseballGame=function BaseballGame(){var _useState=useState(4),_useState2=_slicedToArray(_useState,2),lengthOfArray=_useState2[0],setLengthOfArray=_useState2[1];// 상태는 비동기 기억하기\nvar _useState3=useState({targetNumber:createRandomNumbers(lengthOfArray),currentValue:null,tryLog:[]}),_useState4=_slicedToArray(_useState3,2),state=_useState4[0],setState=_useState4[1];// strikeCount, ballCount 배열로 보관\nvar _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),gameCounts=_useState6[0],setGameCounts=_useState6[1];// 에러메시지 관련 상태\nvar _useState7=useState(null),_useState8=_slicedToArray(_useState7,2),errorMessage=_useState8[0],setErrorMessage=_useState8[1];// refs\nvar baseballGameForm=useRef(null);var baseballGameInput=useRef(null);var initialState={targetNumber:createRandomNumbers(lengthOfArray),currentValue:null,tryLog:[]};//handlers\nvar resetState=function resetState(message){alert(message);setState(initialState);setGameCounts([]);setErrorMessage(null);};var onSubmitBaseballGame=function onSubmitBaseballGame(e){e.preventDefault();var errorMessageArray=Array.from(getErrorMessages(baseballGameInput,tryLog,lengthOfArray));var tryLogContainsCurrentValue=tryLog.includes(baseballGameInput.current.value);if(!errorMessageArray.length&&!tryLogContainsCurrentValue){updateGameCounts();updateInputValue(baseballGameInput);}setErrorMessage(errorMessageArray);clearInputValue(baseballGameInput);};var updateInputValue=function updateInputValue(input){var inputValue=input.current.value;var tryLog=state.tryLog;setState(_objectSpread(_objectSpread({},state),{},{currentValue:inputValue,tryLog:[].concat(_toConsumableArray(tryLog),[inputValue])}));};var updateGameCounts=function updateGameCounts(){var currentValue=baseballGameInput.current.value;var targetNumber=state.targetNumber;var _compareTwoArrays=compareTwoArrays(targetNumber,currentValue),_compareTwoArrays2=_slicedToArray(_compareTwoArrays,2),strikeCount=_compareTwoArrays2[0],ballCount=_compareTwoArrays2[1];setGameCounts([].concat(_toConsumableArray(gameCounts),[{strikeCount:strikeCount,ballCount:ballCount}]));};var handleResetGame=function handleResetGame(){var targetNumber=state.targetNumber;var strikeCount=compareTwoArrays(targetNumber,currentValue)[0];var answer=Array.from(targetNumber).join('');if(strikeCount===lengthOfArray)resetState('정답입니다! 게임을 리셋 하시겠습니까?');if(tryLog.length===10)resetState(\"10\\uD68C \\uC2DC\\uB3C4\\uC5D0 \\uB3C4\\uB2EC\\uD558\\uC600\\uC2B5\\uB2C8\\uB2E4. \\uC815\\uB2F5\\uC740 : \".concat(answer,\" \\uC785\\uB2C8\\uB2E4.\"));};var handleKeyPressEvent=function handleKeyPressEvent(e){return e.key==='Enter'?onSubmitBaseballGame(e):undefined;};var createErrorMessages=function createErrorMessages(errorMessage){var templates=createEmptyArray(errorMessage.length);errorMessage.map(function(template,i){return templates[i]=/*#__PURE__*/_jsx(P,{style:{color:COLOR.RED},content:template,className:''},i);});return templates;};var createCountTemplates=function createCountTemplates(){var tryLog=state.tryLog;var templates=createEmptyArray(gameCounts.length);gameCounts.map(function(game,i){var strikeCount=game.strikeCount,ballCount=game.ballCount;return templates[i]=/*#__PURE__*/_jsx(ResultTemplate,{index:i,strikeCount:strikeCount,ballCount:ballCount,tryLog:tryLog},i);});return templates;};var updateLengthOfArray=function updateLengthOfArray(number){setLengthOfArray(number);setState(_objectSpread(_objectSpread({},state),{},{targetNumber:createRandomNumbers(number)}));};var buttonTemplates=function buttonTemplates(){var templates=createEmptyArray(7);templates.map(function(el,i){return templates[i]=/*#__PURE__*/_jsx(DigitButton,{digit:i+3,updateNumber:updateLengthOfArray},i);});return templates;};var currentValue=state.currentValue,tryLog=state.tryLog;return/*#__PURE__*/_jsxs(Form,{ref:baseballGameForm,onSubmit:onSubmitBaseballGame,children:[currentValue?null:/*#__PURE__*/_jsx(P,{content:\"\\uC790\\uB9AC\\uC218\\uB97C \\uC120\\uD0DD\\uD574 \\uC8FC\\uC138\\uC694\",className:'',style:undefined}),currentValue?null:buttonTemplates(),/*#__PURE__*/_jsx(P,{content:\"\\uB79C\\uB364\\uC73C\\uB85C \\uC81C\\uACF5\\uB418\\uB294 \".concat(lengthOfArray,\"\\uC790\\uB9AC \\uC22B\\uC790\\uB97C \\uC608\\uCE21\\uD574 \\uBCF4\\uC138\\uC694.\"),className:'',style:undefined}),/*#__PURE__*/_jsx(Input,{ref:baseballGameInput,onKeyPressEvent:handleKeyPressEvent,type:''}),/*#__PURE__*/_jsx(Button,{type:'submit',content:'입력',className:''}),!errorMessage?null:createErrorMessages(errorMessage),currentValue?createCountTemplates():null,currentValue?handleResetGame():null]});};","map":{"version":3,"names":["React","useRef","useState","Button","Input","Form","P","DigitButton","ResultTemplate","COLOR","getErrorMessages","createRandomNumbers","clearInputValue","compareTwoArrays","createEmptyArray","BaseballGame","lengthOfArray","setLengthOfArray","targetNumber","currentValue","tryLog","state","setState","gameCounts","setGameCounts","errorMessage","setErrorMessage","baseballGameForm","baseballGameInput","initialState","resetState","message","alert","onSubmitBaseballGame","e","preventDefault","errorMessageArray","Array","from","tryLogContainsCurrentValue","includes","current","value","length","updateGameCounts","updateInputValue","input","inputValue","strikeCount","ballCount","handleResetGame","answer","join","handleKeyPressEvent","key","undefined","createErrorMessages","templates","map","template","i","color","RED","createCountTemplates","game","updateLengthOfArray","number","buttonTemplates","el"],"sources":["/Users/leezer/Desktop/codeStates/REACT_TYPESCRIPT_STUDY/react-study/src/pages/baseballGame/BaseballGame.tsx"],"sourcesContent":["import React, { useRef, useState } from 'react';\nimport { Button, Input, Form, P, DigitButton } from '../../components';\nimport ResultTemplate from './ResultTemplate';\nimport { COLOR } from '../../common/constants/constants';\nimport { getErrorMessages, createRandomNumbers, clearInputValue, compareTwoArrays, createEmptyArray } from '../../utils';\n\nexport const BaseballGame = () => {\n  const [lengthOfArray, setLengthOfArray] = useState<any>(4);\n  // 상태는 비동기 기억하기\n  const [state, setState] = useState<any | object>({ targetNumber: createRandomNumbers(lengthOfArray), currentValue: null, tryLog: [] });\n  // strikeCount, ballCount 배열로 보관\n  const [gameCounts, setGameCounts] = useState<any[]>([]);\n  // 에러메시지 관련 상태\n  const [errorMessage, setErrorMessage] = useState<any>(null);\n\n  // refs\n  const baseballGameForm = useRef<HTMLFormElement>(null);\n  const baseballGameInput = useRef<any>(null);\n\n  const initialState = {\n    targetNumber: createRandomNumbers(lengthOfArray),\n    currentValue: null,\n    tryLog: [],\n  };\n\n  //handlers\n  const resetState = (message: string) => {\n    alert(message);\n    setState(initialState);\n    setGameCounts([]);\n    setErrorMessage(null);\n  };\n\n  const onSubmitBaseballGame = (e: React.FormEvent) => {\n    e.preventDefault();\n\n    const errorMessageArray = Array.from(getErrorMessages(baseballGameInput, tryLog, lengthOfArray));\n    const tryLogContainsCurrentValue = tryLog.includes(baseballGameInput.current.value);\n\n    if (!errorMessageArray.length && !tryLogContainsCurrentValue) {\n      updateGameCounts();\n      updateInputValue(baseballGameInput);\n    }\n\n    setErrorMessage(errorMessageArray);\n    clearInputValue(baseballGameInput);\n  };\n\n  const updateInputValue = (input: any) => {\n    const inputValue = input.current.value;\n    const { tryLog } = state;\n\n    setState({\n      ...state,\n      currentValue: inputValue,\n      tryLog: [...tryLog, inputValue],\n    });\n  };\n\n  const updateGameCounts = () => {\n    const currentValue = baseballGameInput.current.value;\n    const { targetNumber } = state;\n    const [strikeCount, ballCount] = compareTwoArrays(targetNumber, currentValue);\n\n    setGameCounts([...gameCounts, { strikeCount, ballCount }]);\n  };\n\n  const handleResetGame = () => {\n    const { targetNumber } = state;\n    const strikeCount = compareTwoArrays(targetNumber, currentValue)[0];\n    const answer = Array.from(targetNumber).join('');\n\n    if (strikeCount === lengthOfArray) resetState('정답입니다! 게임을 리셋 하시겠습니까?');\n    if (tryLog.length === 10) resetState(`10회 시도에 도달하였습니다. 정답은 : ${answer} 입니다.`);\n  };\n\n  const handleKeyPressEvent = (e: React.KeyboardEvent<HTMLInputElement>) => {\n    return e.key === 'Enter' ? onSubmitBaseballGame(e) : undefined;\n  };\n\n  const createErrorMessages = (errorMessage: []) => {\n    const templates: any[] = createEmptyArray(errorMessage.length);\n\n    errorMessage.map((template: any, i) => {\n      return (templates[i] = <P key={i} style={{ color: COLOR.RED }} content={template} className={''} />);\n    });\n\n    return templates;\n  };\n\n  const createCountTemplates = () => {\n    const { tryLog } = state;\n    const templates: any[] = createEmptyArray(gameCounts.length);\n\n    gameCounts.map((game, i) => {\n      const { strikeCount, ballCount } = game;\n\n      return (templates[i] = <ResultTemplate key={i} index={i} strikeCount={strikeCount} ballCount={ballCount} tryLog={tryLog} />);\n    });\n\n    return templates;\n  };\n\n  const updateLengthOfArray = (number: number) => {\n    setLengthOfArray(number);\n\n    setState({\n      ...state,\n      targetNumber: createRandomNumbers(number),\n    });\n  };\n\n  const buttonTemplates = () => {\n    const templates: any[] = createEmptyArray(7);\n\n    templates.map((el, i) => {\n      return (templates[i] = <DigitButton key={i} digit={i + 3} updateNumber={updateLengthOfArray} />);\n    });\n\n    return templates;\n  };\n\n  const { currentValue, tryLog } = state;\n\n  return (\n    <Form ref={baseballGameForm} onSubmit={onSubmitBaseballGame}>\n      {currentValue ? null : <P content={`자리수를 선택해 주세요`} className={''} style={undefined} />}\n      {currentValue ? null : buttonTemplates()}\n      <P content={`랜덤으로 제공되는 ${lengthOfArray}자리 숫자를 예측해 보세요.`} className={''} style={undefined} />\n      <Input ref={baseballGameInput} onKeyPressEvent={handleKeyPressEvent} type={''} />\n      <Button type={'submit'} content={'입력'} className={''} />\n      {!errorMessage ? null : createErrorMessages(errorMessage)}\n      {currentValue ? createCountTemplates() : null}\n      {currentValue ? handleResetGame() : null}\n    </Form>\n  );\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}