{"ast":null,"code":"import _regeneratorRuntime from\"/Users/leezer/Desktop/codeStates/REACT_TYPESCRIPT_STUDY/react-study/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _objectSpread from\"/Users/leezer/Desktop/codeStates/REACT_TYPESCRIPT_STUDY/react-study/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _asyncToGenerator from\"/Users/leezer/Desktop/codeStates/REACT_TYPESCRIPT_STUDY/react-study/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/leezer/Desktop/codeStates/REACT_TYPESCRIPT_STUDY/react-study/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useCallback,useRef,useState}from'react';import{한글_정규표현식}from'../../common/regex';import{clearInputValue,isValidInputWord}from'../../utils';import{fetch우리말api}from'../../common/api';import{CLASSNAME,COLOR,DEFAULT,ERROR_MESSAGE}from'../../common/constants/constants';import{Button,Input,Form,P}from'../../components';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var CurrentGame=function CurrentGame(){var _useState=useState({prevWord:undefined,currentWord:DEFAULT.GIVEN_WORD,definition:undefined,loading:false}),_useState2=_slicedToArray(_useState,2),state=_useState2[0],setState=_useState2[1];var wordInput=useRef(null);var errorMessage=useRef(null);var wordRelayForm=useRef(null);var handleErrorMessage=function handleErrorMessage(word,currentWord){var errorMessage;if((word.length>3||word.length<3)&&한글_정규표현식.test(word)){errorMessage=ERROR_MESSAGE.NOT_THREE_WORD;}else if(!한글_정규표현식.test(word)){errorMessage=ERROR_MESSAGE.NOT_KOREAN;}else if(currentWord.at(-1)!==word.at(0)){errorMessage=ERROR_MESSAGE.NOT_CORRESPONDING_LETTER;}else{errorMessage=undefined;}return errorMessage;};var updateErrorMessage=function updateErrorMessage(message){errorMessage.current.textContent=message;};var handleSubmitButton=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(word){var currentWord;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:currentWord=state.currentWord;setState({loading:true});_context3.next=4;return fetch우리말api(word);case 4:if(!_context3.sent){_context3.next=8;break;}setTimeout(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.t0=setState;_context.t1=_objectSpread;_context.t2=_objectSpread({},state);_context.t3={};_context.t4=currentWord;_context.t5=word;_context.next=8;return fetch우리말api(word);case 8:_context.t6=_context.sent;_context.t7={prevWord:_context.t4,currentWord:_context.t5,definition:_context.t6,loading:false};_context.t8=(0,_context.t1)(_context.t2,_context.t3,_context.t7);(0,_context.t0)(_context.t8);case 12:case\"end\":return _context.stop();}}},_callee);})));_context3.next=9;break;case 8:setTimeout(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:setState(_objectSpread(_objectSpread({},state),{},{prevWord:currentWord,definition:undefined,loading:false}));case 1:case\"end\":return _context2.stop();}}},_callee2);})));case 9:case\"end\":return _context3.stop();}}},_callee3);}));return function handleSubmitButton(_x){return _ref.apply(this,arguments);};}();useCallback(handleSubmitButton,[state]);var onClickSubmitButton=function onClickSubmitButton(currentWord){var errorMessageHandler=handleErrorMessage(wordInput.current.value,currentWord);updateErrorMessage(errorMessageHandler);if(isValidInputWord(errorMessageHandler)){handleSubmitButton(wordInput.current.value);}clearInputValue(wordInput);};var handleKeyPressEvent=function handleKeyPressEvent(e){return e.key==='Enter'?handleSubmitWord(e):undefined;};var handleSubmitWord=function handleSubmitWord(e){e.preventDefault();var currentWord=state.currentWord;onClickSubmitButton(currentWord);};var currentWord=state.currentWord,definition=state.definition,loading=state.loading;return/*#__PURE__*/_jsxs(Form,{ref:wordRelayForm,onSubmit:handleSubmitWord,children:[/*#__PURE__*/_jsx(P,{className:\"current-word\",content:currentWord,style:undefined}),/*#__PURE__*/_jsx(Input,{ref:wordInput,type:\"text\",onKeyPressEvent:handleKeyPressEvent}),/*#__PURE__*/_jsx(Button,{type:'submit',content:'입력',className:''}),/*#__PURE__*/_jsx(P,{className:loading?undefined:CLASSNAME.HIDE,content:'사전 검색중...',style:undefined}),/*#__PURE__*/_jsx(P,{className:loading?CLASSNAME.HIDE:undefined,content:definition?definition:ERROR_MESSAGE.EMPTY_INPUT,style:undefined}),/*#__PURE__*/_jsx(P,{style:{color:COLOR.RED},ref:errorMessage,content:undefined,className:undefined})]});};export default CurrentGame;","map":{"version":3,"names":["React","useCallback","useRef","useState","한글_정규표현식","clearInputValue","isValidInputWord","fetch우리말api","CLASSNAME","COLOR","DEFAULT","ERROR_MESSAGE","Button","Input","Form","P","CurrentGame","prevWord","undefined","currentWord","GIVEN_WORD","definition","loading","state","setState","wordInput","errorMessage","wordRelayForm","handleErrorMessage","word","length","test","NOT_THREE_WORD","NOT_KOREAN","at","NOT_CORRESPONDING_LETTER","updateErrorMessage","message","current","textContent","handleSubmitButton","setTimeout","onClickSubmitButton","errorMessageHandler","value","handleKeyPressEvent","e","key","handleSubmitWord","preventDefault","HIDE","EMPTY_INPUT","color","RED"],"sources":["/Users/leezer/Desktop/codeStates/REACT_TYPESCRIPT_STUDY/react-study/src/pages/word-relay/currentGame.tsx"],"sourcesContent":["import React, { useCallback, useRef, useState } from 'react';\nimport { 한글_정규표현식 } from '../../common/regex';\nimport { clearInputValue, isValidInputWord } from '../../utils';\nimport { fetch우리말api } from '../../common/api';\nimport { CLASSNAME, COLOR, DEFAULT, ERROR_MESSAGE } from '../../common/constants/constants';\nimport { Button, Input, Form, P } from '../../components';\n\ntype setState = any;\n\nconst CurrentGame = () => {\n  const [state, setState] = useState<setState>({ prevWord: undefined, currentWord: DEFAULT.GIVEN_WORD, definition: undefined, loading: false });\n\n  const wordInput = useRef<HTMLInputElement | any>(null);\n  const errorMessage = useRef<any>(null);\n  const wordRelayForm = useRef<HTMLFormElement>(null);\n\n  const handleErrorMessage = (word: string, currentWord: string) => {\n    let errorMessage;\n\n    if ((word.length > 3 || word.length < 3) && 한글_정규표현식.test(word)) {\n      errorMessage = ERROR_MESSAGE.NOT_THREE_WORD;\n    } else if (!한글_정규표현식.test(word)) {\n      errorMessage = ERROR_MESSAGE.NOT_KOREAN;\n    } else if (currentWord.at(-1) !== word.at(0)) {\n      errorMessage = ERROR_MESSAGE.NOT_CORRESPONDING_LETTER;\n    } else {\n      errorMessage = undefined;\n    }\n\n    return errorMessage;\n  };\n\n  const updateErrorMessage = (message: any) => {\n    errorMessage.current.textContent = message;\n  };\n\n  const handleSubmitButton = async (word: any) => {\n    let { currentWord } = state;\n\n    setState({\n      loading: true,\n    });\n\n    if (await fetch우리말api(word)) {\n      setTimeout(async () => {\n        setState({\n          ...state,\n          prevWord: currentWord,\n          currentWord: word,\n          definition: await fetch우리말api(word),\n          loading: false,\n        });\n      });\n    } else {\n      setTimeout(async () => {\n        setState({\n          ...state,\n          prevWord: currentWord,\n          definition: undefined,\n          loading: false,\n        });\n      });\n    }\n  };\n\n  useCallback(handleSubmitButton, [state]);\n\n  const onClickSubmitButton = (currentWord: string) => {\n    const errorMessageHandler: string | undefined | null = handleErrorMessage(wordInput.current.value, currentWord);\n\n    updateErrorMessage(errorMessageHandler);\n\n    if (isValidInputWord(errorMessageHandler)) {\n      handleSubmitButton(wordInput.current.value);\n    }\n\n    clearInputValue(wordInput);\n  };\n\n  const handleKeyPressEvent = (e: any) => {\n    return e.key === 'Enter' ? handleSubmitWord(e) : undefined;\n  };\n\n  const handleSubmitWord = (e: { preventDefault: () => void }) => {\n    e.preventDefault();\n\n    const { currentWord } = state;\n\n    onClickSubmitButton(currentWord);\n  };\n\n  const { currentWord, definition, loading } = state;\n\n  return (\n    <Form ref={wordRelayForm} onSubmit={handleSubmitWord}>\n      <P className='current-word' content={currentWord} style={undefined}></P>\n      <Input ref={wordInput} type='text' onKeyPressEvent={handleKeyPressEvent} />\n      <Button type={'submit'} content={'입력'} className={''} />\n      <P className={loading ? undefined : CLASSNAME.HIDE} content={'사전 검색중...'} style={undefined}></P>\n      <P className={loading ? CLASSNAME.HIDE : undefined} content={definition ? definition : ERROR_MESSAGE.EMPTY_INPUT} style={undefined}></P>\n      <P style={{ color: COLOR.RED }} ref={errorMessage} content={undefined} className={undefined}></P>\n    </Form>\n  );\n};\n\nexport default CurrentGame;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}