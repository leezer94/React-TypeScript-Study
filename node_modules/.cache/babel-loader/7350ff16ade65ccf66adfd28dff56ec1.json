{"ast":null,"code":"var _jsxFileName = \"/Users/leezer/Desktop/codeStates/REACT_TYPESCRIPT_STUDY/react-study/src/pages/word-relay/currentGame.tsx\",\n    _s = $RefreshSig$();\n\nimport React, { useCallback, useRef, useState } from 'react';\nimport { 한글_정규표현식 } from '../../common/regex';\nimport { clearInputValue, isValidInputWord } from '../../utils';\nimport { fetch우리말api } from '../../common/api';\nimport { CLASSNAME, COLOR, DEFAULT, ERROR_MESSAGE } from '../../common/constants/constants';\nimport { Button, Input, Form, P } from '../../components';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst CurrentGame = () => {\n  _s();\n\n  const [state, setState] = useState({\n    prevWord: undefined,\n    currentWord: DEFAULT.GIVEN_WORD,\n    definition: undefined,\n    loading: false\n  });\n  const wordInput = useRef(null);\n  const errorMessage = useRef(null);\n  const wordRelayForm = useRef(null);\n\n  const handleErrorMessage = (word, currentWord) => {\n    let errorMessage;\n\n    if ((word.length > 3 || word.length < 3) && 한글_정규표현식.test(word)) {\n      errorMessage = ERROR_MESSAGE.NOT_THREE_WORD;\n    } else if (!한글_정규표현식.test(word)) {\n      errorMessage = ERROR_MESSAGE.NOT_KOREAN;\n    } else if (currentWord.at(-1) !== word.at(0)) {\n      errorMessage = ERROR_MESSAGE.NOT_CORRESPONDING_LETTER;\n    } else {\n      errorMessage = undefined;\n    }\n\n    return errorMessage;\n  };\n\n  const updateErrorMessage = message => {\n    errorMessage.current.textContent = message;\n  };\n\n  const handleSubmitButton = async word => {\n    let {\n      currentWord\n    } = state;\n    setState({\n      loading: true\n    });\n\n    if (await fetch우리말api(word)) {\n      setTimeout(async () => {\n        setState({ ...state,\n          prevWord: currentWord,\n          currentWord: word,\n          definition: await fetch우리말api(word),\n          loading: false\n        });\n      });\n    } else {\n      setTimeout(async () => {\n        setState({ ...state,\n          prevWord: currentWord,\n          definition: undefined,\n          loading: false\n        });\n      });\n    }\n  };\n\n  useCallback(handleSubmitButton, [state]);\n\n  const onClickSubmitButton = currentWord => {\n    const errorMessageHandler = handleErrorMessage(wordInput.current.value, currentWord);\n\n    if (isValidInputWord(errorMessageHandler)) {\n      handleSubmitButton(wordInput.current.value);\n      updateErrorMessage();\n    }\n\n    clearInputValue(wordInput);\n  };\n\n  const handleKeyPressEvent = e => {\n    return e.key === 'Enter' ? handleSubmitWord(e) : undefined;\n  };\n\n  const handleSubmitWord = e => {\n    e.preventDefault();\n    const {\n      currentWord\n    } = state;\n    onClickSubmitButton(currentWord);\n  };\n\n  const {\n    currentWord,\n    definition,\n    loading\n  } = state;\n  return /*#__PURE__*/_jsxDEV(Form, {\n    ref: wordRelayForm,\n    onSubmit: handleSubmitWord,\n    children: [/*#__PURE__*/_jsxDEV(P, {\n      className: \"current-word\",\n      content: currentWord,\n      style: undefined\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Input, {\n      ref: wordInput,\n      type: \"text\",\n      onKeyPressEvent: handleKeyPressEvent\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Button, {\n      type: 'submit',\n      content: '입력',\n      className: ''\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(P, {\n      className: loading ? undefined : CLASSNAME.HIDE,\n      content: '사전 검색중...',\n      style: undefined\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(P, {\n      className: loading ? CLASSNAME.HIDE : undefined,\n      content: definition ? definition : ERROR_MESSAGE.EMPTY_INPUT,\n      style: undefined\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(P, {\n      style: {\n        color: COLOR.RED\n      },\n      ref: errorMessage,\n      content: undefined,\n      className: undefined\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 94,\n    columnNumber: 5\n  }, this);\n};\n\n_s(CurrentGame, \"BrKDhTnqAbFaEASdkRSSuSmSHq0=\");\n\n_c = CurrentGame;\nexport default CurrentGame;\n\nvar _c;\n\n$RefreshReg$(_c, \"CurrentGame\");","map":{"version":3,"names":["React","useCallback","useRef","useState","한글_정규표현식","clearInputValue","isValidInputWord","fetch우리말api","CLASSNAME","COLOR","DEFAULT","ERROR_MESSAGE","Button","Input","Form","P","CurrentGame","state","setState","prevWord","undefined","currentWord","GIVEN_WORD","definition","loading","wordInput","errorMessage","wordRelayForm","handleErrorMessage","word","length","test","NOT_THREE_WORD","NOT_KOREAN","at","NOT_CORRESPONDING_LETTER","updateErrorMessage","message","current","textContent","handleSubmitButton","setTimeout","onClickSubmitButton","errorMessageHandler","value","handleKeyPressEvent","e","key","handleSubmitWord","preventDefault","HIDE","EMPTY_INPUT","color","RED"],"sources":["/Users/leezer/Desktop/codeStates/REACT_TYPESCRIPT_STUDY/react-study/src/pages/word-relay/currentGame.tsx"],"sourcesContent":["import React, { useCallback, useRef, useState } from 'react';\nimport { 한글_정규표현식 } from '../../common/regex';\nimport { clearInputValue, isValidInputWord } from '../../utils';\nimport { fetch우리말api } from '../../common/api';\nimport { CLASSNAME, COLOR, DEFAULT, ERROR_MESSAGE } from '../../common/constants/constants';\nimport { Button, Input, Form, P } from '../../components';\n\ntype setState = any;\n\nconst CurrentGame = () => {\n  const [state, setState] = useState<setState>({ prevWord: undefined, currentWord: DEFAULT.GIVEN_WORD, definition: undefined, loading: false });\n\n  const wordInput = useRef<HTMLInputElement | any>(null);\n  const errorMessage = useRef<any>(null);\n  const wordRelayForm = useRef<HTMLFormElement>(null);\n\n  const handleErrorMessage = (word: string, currentWord: string) => {\n    let errorMessage;\n\n    if ((word.length > 3 || word.length < 3) && 한글_정규표현식.test(word)) {\n      errorMessage = ERROR_MESSAGE.NOT_THREE_WORD;\n    } else if (!한글_정규표현식.test(word)) {\n      errorMessage = ERROR_MESSAGE.NOT_KOREAN;\n    } else if (currentWord.at(-1) !== word.at(0)) {\n      errorMessage = ERROR_MESSAGE.NOT_CORRESPONDING_LETTER;\n    } else {\n      errorMessage = undefined;\n    }\n\n    return errorMessage;\n  };\n\n  const updateErrorMessage = (message: any) => {\n    errorMessage.current.textContent = message;\n  };\n\n  const handleSubmitButton = async (word: any) => {\n    let { currentWord } = state;\n\n    setState({\n      loading: true,\n    });\n\n    if (await fetch우리말api(word)) {\n      setTimeout(async () => {\n        setState({\n          ...state,\n          prevWord: currentWord,\n          currentWord: word,\n          definition: await fetch우리말api(word),\n          loading: false,\n        });\n      });\n    } else {\n      setTimeout(async () => {\n        setState({\n          ...state,\n          prevWord: currentWord,\n          definition: undefined,\n          loading: false,\n        });\n      });\n    }\n  };\n\n  useCallback(handleSubmitButton, [state]);\n\n  const onClickSubmitButton = (currentWord: string) => {\n    const errorMessageHandler: string | undefined | null = handleErrorMessage(wordInput.current.value, currentWord);\n\n    if (isValidInputWord(errorMessageHandler)) {\n      handleSubmitButton(wordInput.current.value);\n      updateErrorMessage();\n    }\n\n    clearInputValue(wordInput);\n  };\n\n  const handleKeyPressEvent = (e: any) => {\n    return e.key === 'Enter' ? handleSubmitWord(e) : undefined;\n  };\n\n  const handleSubmitWord = (e: { preventDefault: () => void }) => {\n    e.preventDefault();\n\n    const { currentWord } = state;\n\n    onClickSubmitButton(currentWord);\n  };\n\n  const { currentWord, definition, loading } = state;\n\n  return (\n    <Form ref={wordRelayForm} onSubmit={handleSubmitWord}>\n      <P className='current-word' content={currentWord} style={undefined}></P>\n      <Input ref={wordInput} type='text' onKeyPressEvent={handleKeyPressEvent} />\n      <Button type={'submit'} content={'입력'} className={''} />\n      <P className={loading ? undefined : CLASSNAME.HIDE} content={'사전 검색중...'} style={undefined}></P>\n      <P className={loading ? CLASSNAME.HIDE : undefined} content={definition ? definition : ERROR_MESSAGE.EMPTY_INPUT} style={undefined}></P>\n      <P style={{ color: COLOR.RED }} ref={errorMessage} content={undefined} className={undefined}></P>\n    </Form>\n  );\n};\n\nexport default CurrentGame;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}